

<header class="top-header">
	<nav class="navbar navbar-expand">
		<div class="left-topbar d-flex align-items-center">
			<a href="javascript:;" class="toggle-btn">
				<i class="bx bx-menu"></i>
			</a>
		</div>
		@* <div class="flex-grow-1 search-bar">
			<div class="input-group">
				<button class="btn btn-search-back search-arrow-back" type="button"><i class="bx bx-arrow-back"></i></button>
				<input type="text" class="form-control" placeholder="search" />
				<button class="btn btn-search" type="button"><i class="lni lni-search-alt"></i></button>
			</div>
		</div> *@
		<div class="flex-grow-1">
			<!-- Boş temiz alan -->
		</div>
		<div class="right-topbar ms-auto">
			<ul class="navbar-nav">
				<li class="nav-item search-btn-mobile">
					<a class="nav-link position-relative" href="javascript:;">
						<i class="bx bx-search vertical-align-middle"></i>
					</a>
				</li>
				@{
					var unreadMessages = ViewData["UnreadMessages"] as List<Project2EmailNight.Entities.Message> ?? new List<Project2EmailNight.Entities.Message>();
					var unreadCount = (int)(ViewData["UnreadCount"] ?? 0);
				}

				<li class="nav-item dropdown dropdown-lg">
					<a class="nav-link dropdown-toggle dropdown-toggle-nocaret position-relative" href="javascript:;" data-bs-toggle="dropdown">
						@if (unreadCount > 0)
						{
							<span class="msg-count">@unreadCount</span>
						}
						<i class="bx bx-comment-detail vertical-align-middle"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-end">
						<a href="javascript:;">
							<div class="msg-header">
								<h6 class="msg-header-title">@unreadCount Yeni</h6>
								<p class="msg-header-subtitle">Okunmamış Mesajlar</p>
							</div>
						</a>
						<div class="header-message-list">
							@if (unreadMessages.Any())
							{
								@foreach (var message in unreadMessages)
								{
									var initials = $"{message.Sender.FirstName?.Substring(0, 1)}{message.Sender.LastName?.Substring(0, 1)}".ToUpper();
									var timeAgo = DateTime.Now - message.SentDate;
									var timeText = timeAgo.TotalMinutes < 1 ? "Az önce"
									: timeAgo.TotalMinutes < 60 ? $"{(int)timeAgo.TotalMinutes} dk önce"
									: timeAgo.TotalHours < 24 ? $"{(int)timeAgo.TotalHours} saat önce"
									: $"{(int)timeAgo.TotalDays} gün önce";

									<a class="dropdown-item" asp-controller="Email" asp-action="Read" asp-route-id="@message.Id">
										<div class="d-flex align-items-center">
											<div class="user-online">
												<div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center"
													 style="width: 40px; height: 40px; font-size: 14px; font-weight: bold;">
													@initials
												</div>
											</div>
											<div class="flex-grow-1 ms-2">
												<h6 class="msg-name">
													@message.Sender.FirstName @message.Sender.LastName
													<span class="msg-time float-end">@timeText</span>
												</h6>
												<p class="msg-info">@(message.Subject?.Length > 30 ? message.Subject.Substring(0, 30) + "..." : message.Subject)</p>
											</div>
										</div>
									</a>
								}
							}
							else
							{
								<div class="text-center p-4">
									<i class='bx bx-mail-send font-30 text-muted'></i>
									<p class="text-muted mt-2 mb-0">Okunmamış mesaj yok</p>
								</div>
							}
						</div>
						<a asp-controller="Email" asp-action="Index">
							<div class="text-center msg-footer">Tüm Mesajları Gör</div>
						</a>
					</div>
				</li>
				<li class="nav-item dropdown dropdown-lg">
					<a class="nav-link dropdown-toggle dropdown-toggle-nocaret position-relative" href="javascript:;" data-bs-toggle="dropdown">
						<i class="bx bx-bell vertical-align-middle"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-end">
						<a href="javascript:;">
							<div class="msg-header">
								<h6 class="msg-header-title">Bildirimler</h6>
								<p class="msg-header-subtitle">Sistem Bildirimleri</p>
							</div>
						</a>
						<div class="header-notifications-list">
							<div class="text-center p-4">
								<i class='bx bx-bell-off font-30 text-muted'></i>
								<p class="text-muted mt-2 mb-0">Yeni bildirim yok</p>
							</div>
						</div>
					</div>
				</li>
				<li class="nav-item dropdown dropdown-user-profile">
					<a class="nav-link dropdown-toggle dropdown-toggle-nocaret" href="javascript:;" data-bs-toggle="dropdown">
						<div class="d-flex user-box align-items-center">
							<div class="user-info">
								<p class="user-name mb-0">@ViewData["UserFirstName"] @ViewData["UserLastName"]</p>
								<p class="designattion mb-0">@ViewData["UserEmail"]</p>
							</div>
							<div class="user-avatar-header bg-primary text-white rounded-circle d-flex align-items-center justify-content-center ms-2"
								 style="width: 40px; height: 40px; font-weight: bold; font-size: 14px;">
								@ViewData["UserInitials"]
							</div>
						</div>
					</a>
					<div class="dropdown-menu dropdown-menu-end">
						<a class="dropdown-item" asp-controller="Account" asp-action="Profile">
							<i class="bx bx-user"></i><span>Profil</span>
						</a>
						<a class="dropdown-item" asp-controller="Account" asp-action="Settings">
							<i class="bx bx-cog"></i><span>Ayarlar</span>
						</a>
						<a class="dropdown-item" asp-controller="Dashboard" asp-action="Index">
							<i class="bx bx-tachometer"></i><span>Ana Sayfa</span>
						</a>
					
						</a>
					</div>
				</li>
				<li class="nav-item">
					<a asp-controller="Login" asp-action="Logout" class="nav-link" title="Çıkış Yap">
						<i class='bx bx-log-out-circle text-primary font-22'></i>
					</a>
				</li>
				@* <li class="nav-item dropdown dropdown-language">
					<a class="nav-link dropdown-toggle dropdown-toggle-nocaret" href="javascript:;" data-bs-toggle="dropdown">
						<div class="lang d-flex">
							<div>
								<i class="flag-icon flag-icon-um"></i>
							</div>
							<div>
								<span>En</span>
							</div>
						</div>
					</a>
					<div class="dropdown-menu dropdown-menu-end">
						<a class="dropdown-item" href="javascript:;">
							<i class="flag-icon flag-icon-de"></i><span>German</span>
						</a>
						<a class="dropdown-item" href="javascript:;">
							<i class="flag-icon flag-icon-fr"></i><span>French</span>
						</a>
						<a class="dropdown-item" href="javascript:;">
							<i class="flag-icon flag-icon-um"></i><span>English</span>
						</a>
						<a class="dropdown-item" href="javascript:;">
							<i class="flag-icon flag-icon-in"></i><span>Hindi</span>
						</a>
						<a class="dropdown-item" href="javascript:;">
							<i class="flag-icon flag-icon-cn"></i><span>Chinese</span>
						</a>
						<a class="dropdown-item" href="javascript:;">
							<i class="flag-icon flag-icon-ae"></i><span>Arabic</span>
						</a>
					</div>
				</li> *@

			</ul>
		</div>
	</nav>
</header>